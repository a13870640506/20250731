import{l as h,o as I,f as C,U as s,w as a,P as e,B as i,aP as _,Q as b,$ as D,a0 as P}from"./index-D8EcwpnI.js";import{E as S,s as B,a as p,t as N,c as k,d as z,e as F}from"./el-notification-BoPLE-YD.js";import{E as $}from"./el-button-Btlko-dl.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CPzh3zQQ.js";import"./vnode-BXo6xhNu.js";const l=f=>(D("data-v-940e2a1e"),f=f(),P(),f),J={class:"div-mian"},R={class:"line0"},L=l(()=>e("h3",null,"数据集类型",-1)),M=l(()=>e("p",null,"仅使用官方文档时序预测的TsDataset数据集",-1)),O=l(()=>e("select",{name:"dataset",class:"data"},[e("option",null,"TsDataset")],-1)),Q=l(()=>e("h3",null,"数据集导入",-1)),j=l(()=>e("p",null,"导入训练所使用的数据集",-1)),q=l(()=>e("h3",null,"输入长度",-1)),A=l(()=>e("p",null,"每次训练及预测时输入的前序时间步长",-1)),H=l(()=>e("h3",null,"预测长度",-1)),K=l(()=>e("p",null,"每次训练及预测时输入的后序时间步长",-1)),W={class:"line"},X=l(()=>e("h3",null,"数据时间列名称",-1)),Y=l(()=>e("p",null,"填写数据集中时间列名称",-1)),Z=l(()=>e("h3",null,"分组序列名称",-1)),ee=l(()=>e("p",null,"用于模型分组，区分不同组的时序数据集",-1)),te={class:"line"},le=l(()=>e("h3",null,"目标列名称(多个预测目标用逗号隔开，注意逗号后面没有空格)",-1)),se=l(()=>e("p",null,"填写要预测的变量名称",-1)),ae={class:"line"},oe=l(()=>e("h3",null,"协变量列名称(多个变量用逗号隔开，注意逗号后面没有空格)",-1)),ne=l(()=>e("p",null,"填写用于预测的协变量名称",-1)),ue={class:"line0"},de=l(()=>e("h3",null,"学习率(Learning Rate)",-1)),ie=l(()=>e("p",null,"控制模型参数更新的步长",-1)),_e=l(()=>e("h3",null,"批大小(Batch Size)",-1)),ce=l(()=>e("p",null,"用于提高模型的精度，常设置为2的指数倍",-1)),pe=l(()=>e("h3",null,"迭代次数(Epochs)",-1)),re=l(()=>e("p",null,"每次迭代所使用的样本数量",-1)),me={class:"line"},he=l(()=>e("h3",null,"选择设备",-1)),fe=l(()=>e("p",null,"选择训练使用设备，推荐使用GPU",-1)),ve=l(()=>e("select",{name:"device",class:"data"},[e("option",null,"GPU"),e("option",null,"CPU")],-1)),ge=l(()=>e("h3",null,"设备ID",-1)),ye=l(()=>e("p",null,"仅支持单卡，默认值为0",-1)),we=l(()=>e("input",{type:"number",class:"data"},null,-1)),be={class:"line",style:{height:"102px"}},xe=l(()=>e("h3",null,"输出目录(模型训练完成后的保存目录)",-1)),Ve={class:"line",style:{height:"102px","margin-top":"14px"}},Ue=l(()=>e("h3",null,"启动训练",-1)),Te=l(()=>e("input",{type:"text",class:"data",placeholder:"设置好以上参数后,点开始训练按钮启动模型训练",disabled:"disabled"},null,-1)),Ee={__name:"articleChannel",setup(f){const g=h("1"),o=h({input_length:"",output_length:"",time_colname:"",group_name:"",target_colname:"",observe_colname:"",learning_rate:"",batch_size:"",epochs:"",output_directory:""}),m=h(!1),x=async()=>{m.value=!0;const d=JSON.stringify(o.value);console.log(d);try{const t=await B(d);t.data.code===200?(console.log("Success:",t.data),setTimeout(()=>{p({message:"状态码：200，"+t.data.message,type:"success",offset:54}),m.value=!1},1e3)):response.data.code===400?setTimeout(()=>{p({message:"状态码：400，"+t.data.message,type:"error",offset:54}),m.value=!1},1e3):setTimeout(()=>{p({message:"未知错误（状态码".concat(t.status,"）"),type:"error",offset:54}),m.value=!1},1e3)}catch(t){console.log("Error:",t),setTimeout(()=>{p({title:"提交失败（请求异常）",message:"请检查后台IP地址和运行状态",type:"error",offset:54}),m.value=!1},1e3)}},V=h(null),v=h(null),U=d=>{const t=d.target.files[0];t&&(V.value=t,v.value=new FormData,v.value.append("file",t),console.log(v.value))},r=h(!1),T=async()=>{try{r.value=!0;const d=await N(v.value);d.data.code===200?setTimeout(()=>{p({message:"状态码：200，"+d.data.message,type:"success",offset:54}),r.value=!1},1e3):d.data.code===400?setTimeout(()=>{p({message:"状态码：400，"+d.data.message,type:"error",offset:54}),r.value=!1},1e3):setTimeout(()=>{p({message:"未知错误（状态码".concat(d.status,"）"),type:"error",offset:54}),r.value=!1},1e3),console.log(d)}catch(d){r.value=!0,setTimeout(()=>{p({title:"训练失败（请求异常）",message:"请检查后台IP地址和运行状态",type:"error",offset:54}),r.value=!1},1e3),console.log(d)}};return(d,t)=>{const u=k,c=z,y=F,w=$,E=S;return I(),C("div",J,[s(E,{modelValue:g.value,"onUpdate:modelValue":t[10]||(t[10]=n=>g.value=n)},{default:a(()=>[s(y,{label:"数据校验",name:"1"},{default:a(()=>[e("div",R,[s(c,{class:"el-row1",gutter:30},{default:a(()=>[s(u,{span:6},{default:a(()=>[L,M,O]),_:1}),s(u,{span:6},{default:a(()=>[Q,j,e("input",{type:"file",class:"data",onChange:U},null,32)]),_:1}),s(u,{span:6},{default:a(()=>[q,A,i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.value.input_length=n),type:"number",class:"data",placeholder:"请输入一个整数"},null,512),[[_,o.value.input_length]])]),_:1}),s(u,{span:6,class:"line1-col2"},{default:a(()=>[H,K,i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.value.output_length=n),type:"number",class:"data",placeholder:"请输入一个整数"},null,512),[[_,o.value.output_length]])]),_:1})]),_:1})]),e("div",W,[s(c,{class:"el-row2",gutter:30},{default:a(()=>[s(u,{span:6,class:"line2-col1"},{default:a(()=>[X,Y,i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.value.time_colname=n),type:"text",class:"data",placeholder:"示例: datatime_col"},null,512),[[_,o.value.time_colname]])]),_:1}),s(u,{span:6,class:"line2-col2"},{default:a(()=>[Z,ee,i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>o.value.group_name=n),type:"text",class:"data",placeholder:"示例: ID"},null,512),[[_,o.value.group_name]])]),_:1})]),_:1})]),e("div",te,[s(c,{class:"el-row3",gutter:30},{default:a(()=>[s(u,{span:12,class:"line2-col1"},{default:a(()=>[le,se,i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>o.value.target_colname=n),type:"text",class:"data",placeholder:"示例: wear,location"},null,512),[[_,o.value.target_colname]])]),_:1})]),_:1})]),e("div",ae,[s(c,{class:"el-row4",gutter:30},{default:a(()=>[s(u,{span:12,class:"line2-col1"},{default:a(()=>[oe,ne,i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>o.value.observe_colname=n),type:"text",class:"data",placeholder:"示例: wear,location"},null,512),[[_,o.value.observe_colname]])]),_:1})]),_:1})])]),_:1}),s(y,{label:"模型训练",name:"2"},{default:a(()=>[e("div",ue,[s(c,{class:"el-row1",gutter:30},{default:a(()=>[s(u,{span:8},{default:a(()=>[de,ie,i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>o.value.learning_rate=n),type:"number",step:"0.0001",class:"data",placeholder:"示例: 0.0001",style:{width:"360px"}},null,512),[[_,o.value.learning_rate]])]),_:1}),s(u,{span:8},{default:a(()=>[_e,ce,i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>o.value.batch_size=n),type:"number",class:"data",placeholder:"请输入一个整数",style:{width:"360px"}},null,512),[[_,o.value.batch_size]])]),_:1}),s(u,{span:8},{default:a(()=>[pe,re,i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=n=>o.value.epochs=n),type:"number",class:"data",placeholder:"请输入一个整数",style:{width:"360px"}},null,512),[[_,o.value.epochs]])]),_:1})]),_:1})]),e("div",me,[s(c,{class:"el-row3",gutter:30},{default:a(()=>[s(u,{span:12},{default:a(()=>[he,fe,ve]),_:1}),s(u,{span:12},{default:a(()=>[ge,ye,we]),_:1})]),_:1})]),e("div",be,[s(c,{class:"el-row3",gutter:30},{default:a(()=>[s(u,{span:12},{default:a(()=>[xe,i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=n=>o.value.output_directory=n),type:"text",class:"data",placeholder:"示例: ./output"},null,512),[[_,o.value.output_directory]])]),_:1})]),_:1})]),s(w,{type:"primary",style:{width:"100%","margin-top":"14px"},onClick:x,loading:m.value},{default:a(()=>[b(" 参数提交 ")]),_:1},8,["loading"]),e("div",Ve,[s(c,{class:"el-row3",gutter:30},{default:a(()=>[s(u,{span:12},{default:a(()=>[Ue,Te]),_:1})]),_:1})]),s(w,{type:"primary",style:{width:"100%","margin-top":"14px"},onClick:T,loading:r.value},{default:a(()=>[b(" 开始训练 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["modelValue"])])}}},Ne=G(Ee,[["__scopeId","data-v-940e2a1e"]]);export{Ne as default};
